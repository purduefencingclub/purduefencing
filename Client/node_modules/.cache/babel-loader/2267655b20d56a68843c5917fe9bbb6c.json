{"ast":null,"code":"import _slicedToArray from\"/home/fencingadmin/purduefencing/purduefencing/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Nav,Container,Button,Row,Col,Card,Modal,Form}from\"react-bootstrap\";import image1 from\"../image1.jpeg\";import axios from\"axios\";import\"../styles/index.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var token;var DashboardPost=function DashboardPost(_ref){var post=_ref.post;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),body=_useState6[0],setBody=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),editFile=_useState8[0],setEditFile=_useState8[1];var titleChange=function titleChange(e){setTitle(e.target.value);};var bodyChange=function bodyChange(e){setBody(e.target.value);};try{token=localStorage.getItem(\"jwtToken\").split(\" \")[1];}catch(err){console.log(\"Token doesn't exist!\");}var handleDelete=function handleDelete(e){console.log(token);e.preventDefault();axios.delete(\"/api/posts/\".concat(post._id),{headers:{\"x-auth-token\":\"\".concat(token)}}).then(function(res){console.log(res);});};var handleEdit=function handleEdit(e){console.log(\"asdf\");var formDataEdit=new FormData();formDataEdit.append(\"title\",title);formDataEdit.append(\"body\",body);formDataEdit.append(\"image\",editFile);console.log(formDataEdit.title);e.preventDefault();axios.put(\"/api/posts/\".concat(post._id),formDataEdit,{headers:{\"x-auth-token\":\"\".concat(token)}}).then(function(res){console.log(res);});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Img,{variant:\"top\",src:post.image}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:post.title}),/*#__PURE__*/_jsxs(Card.Text,{children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleShow,children:\"Edit\"}),/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Edit a post\"})}),/*#__PURE__*/_jsxs(Modal.Body,{children:[\"*Make sure to update every field before you hit submit. sorry\",/*#__PURE__*/_jsxs(Form,{noValidate:true,onSubmit:handleEdit,className:\"submit-form\",encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Title\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Title\",onChange:titleChange})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Body\"}),/*#__PURE__*/_jsx(Form.Control,{placeholder:\"Body\",onChange:bodyChange})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formFile\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Upload image\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",onChange:function onChange(e){return setEditFile(e.target.files[0]);},name:\"image\"})]})]})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,children:\"Close\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleEdit,children:\"Save Changes\"})]})]}),\" \",/*#__PURE__*/_jsx(Button,{onClick:handleDelete,variant:\"dark\",children:\"Delete\"})]})]}),/*#__PURE__*/_jsx(Card.Footer,{className:\"text-muted\"})]})})});};export default DashboardPost;","map":{"version":3,"sources":["/home/fencingadmin/purduefencing/purduefencing/Client/src/components/DashboardPost.js"],"names":["React","useState","Nav","Container","Button","Row","Col","Card","Modal","Form","image1","axios","token","DashboardPost","post","show","setShow","handleClose","handleShow","title","setTitle","body","setBody","editFile","setEditFile","titleChange","e","target","value","bodyChange","localStorage","getItem","split","err","console","log","handleDelete","preventDefault","delete","_id","headers","then","res","handleEdit","formDataEdit","FormData","append","put","image","files"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport {\n  Nav,\n  Container,\n  Button,\n  Row,\n  Col,\n  Card,\n  Modal,\n  Form,\n} from \"react-bootstrap\";\nimport image1 from \"../image1.jpeg\";\nimport axios from \"axios\";\n\nimport \"../styles/index.css\";\n\nlet token;\nconst DashboardPost = ({ post }) => {\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  const [title, setTitle] = useState();\n  const [body, setBody] = useState();\n  const [editFile, setEditFile] = useState();\n\n  const titleChange = (e) => {\n    setTitle(e.target.value);\n  };\n  const bodyChange = (e) => {\n    setBody(e.target.value);\n  };\n\n  try {\n    token = localStorage.getItem(\"jwtToken\").split(\" \")[1];\n  } catch (err) {\n    console.log(\"Token doesn't exist!\");\n  }\n  const handleDelete = (e) => {\n    console.log(token);\n    e.preventDefault();\n    axios\n      .delete(`/api/posts/${post._id}`, {\n        headers: {\n          \"x-auth-token\": `${token}`,\n        },\n      })\n      .then((res) => {\n        console.log(res);\n      });\n  };\n\n  const handleEdit = (e) => {\n    console.log(\"asdf\");\n    const formDataEdit = new FormData();\n\n    formDataEdit.append(\"title\", title);\n    formDataEdit.append(\"body\", body);\n    formDataEdit.append(\"image\", editFile);\n    console.log(formDataEdit.title);\n    e.preventDefault();\n    axios\n      .put(`/api/posts/${post._id}`, formDataEdit, {\n        headers: {\n          \"x-auth-token\": `${token}`,\n        },\n      })\n      .then((res) => {\n        console.log(res);\n      });\n  };\n  return (\n    <>\n      <div>\n        <Card>\n          <Card.Img variant=\"top\" src={post.image} />\n          <Card.Body>\n            <Card.Title>{post.title}</Card.Title>\n            <Card.Text>\n              <Button variant=\"primary\" onClick={handleShow}>\n                Edit\n              </Button>\n              <Modal show={show} onHide={handleClose}>\n                <Modal.Header closeButton>\n                  <Modal.Title>Edit a post</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                  *Make sure to update every field before you hit submit. sorry\n                  <Form\n                    noValidate\n                    onSubmit={handleEdit}\n                    className=\"submit-form\"\n                    encType=\"multipart/form-data\"\n                  >\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>Title</Form.Label>\n                      <Form.Control\n                        type=\"email\"\n                        placeholder=\"Title\"\n                        onChange={titleChange}\n                      />\n                    </Form.Group>\n\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>Body</Form.Label>\n                      <Form.Control placeholder=\"Body\" onChange={bodyChange} />\n                    </Form.Group>\n                    <Form.Group controlId=\"formFile\" className=\"mb-3\">\n                      <Form.Label>Upload image</Form.Label>\n                      <Form.Control\n                        type=\"file\"\n                        onChange={(e) => setEditFile(e.target.files[0])}\n                        name=\"image\"\n                      />\n                    </Form.Group>\n                  </Form>\n                </Modal.Body>\n                <Modal.Footer>\n                  <Button variant=\"secondary\" onClick={handleClose}>\n                    Close\n                  </Button>\n                  <Button variant=\"primary\" onClick={handleEdit}>\n                    Save Changes\n                  </Button>\n                </Modal.Footer>\n              </Modal>{\" \"}\n              <Button onClick={handleDelete} variant=\"dark\">\n                Delete\n              </Button>\n            </Card.Text>\n          </Card.Body>\n          <Card.Footer className=\"text-muted\"></Card.Footer>\n        </Card>\n      </div>\n    </>\n  );\n};\n\nexport default DashboardPost;\n"]},"metadata":{},"sourceType":"module"}